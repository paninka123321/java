<div class="battery-widget">
  <!-- SVG pierÅ›cieÅ„ -->
  <svg id="batterySVG" width="120" height="120" viewBox="0 0 120 120">
    <!-- Szare tÅ‚o -->
    <circle
      cx="60"
      cy="60"
      r="52"
      stroke="#3a3a3c"
      stroke-width="10"
      fill="none"
    />
    <!-- Zielony pasek (bÄ™dzie animowany) -->
    <circle
      id="batteryProgress"
      cx="60"
      cy="60"
      r="52"
      stroke="#4cd964"
      stroke-width="10"
      fill="none"
      stroke-linecap="round"
      stroke-dasharray="326"  <!-- obwÃ³d koÅ‚a -->
      stroke-dashoffset="326" <!-- start od pustego -->
      transform="rotate(-90 60 60)" <!-- Å¼eby zaczynaÅ‚o siÄ™ od gÃ³ry -->
    />
  </svg>

  <!-- ZawartoÅ›Ä‡ w Å›rodku -->
  <div class="battery-content">
    <div class="battery-icon">ðŸ”‹</div>
    <div id="batteryPercent" class="battery-percent">75%</div>
  </div>
</div>

<script>
  const batteryProgress = document.getElementById("batteryProgress");
  const percentText = document.getElementById("batteryPercent");

  let batteryValue = 75; // wartoÅ›Ä‡ poczÄ…tkowa
  const circleLength = 2 * Math.PI * 52; // obwÃ³d koÅ‚a

  function drawBatteryGauge(value) {
    const fraction = Math.min(Math.max(value / 100, 0), 1);
    const offset = circleLength * (1 - fraction);
    batteryProgress.style.strokeDashoffset = offset;
    percentText.textContent = `${Math.round(value)}%`;
  }

  function updateGauge(newValue) {
    batteryValue = newValue;
    drawBatteryGauge(batteryValue);
  }

  // pierwsze rysowanie
  drawBatteryGauge(batteryValue);

  // symulacja zmian co 2 sekundy
  let demoVal = 75;
  setInterval(() => {
    demoVal = (demoVal + 5) % 101;
    updateGauge(demoVal);
  }, 2000);
</script>

<style>
  .battery-widget {
    position: relative;
    width: 120px;
    height: 120px;
    background: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  }

  .battery-content {
    position: absolute;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: black;
    font-family: sans-serif;
  }

  .battery-icon {
    font-size: 26px;
    margin-bottom: 4px;
  }

  .battery-percent {
    font-size: 16px;
    font-weight: 600;
  }

  /* animacja wygÅ‚adzajÄ…ca ruch */
  #batteryProgress {
    transition: stroke-dashoffset 0.8s ease;
  }
</style>
