CASE 
  WHEN :P2_LEVEL = 0 THEN NULL
  ELSE REGEXP_SUBSTR(:P2_PATH,'[^|]+',1,:P2_LEVEL)
END

CASE
  WHEN :P2_LEVEL = 0 THEN NULL
  ELSE REGEXP_SUBSTR(:P2_PATH,'^(?:[^|]+\|){0,'||(:P2_LEVEL-1)||'}[^|]+')
END
